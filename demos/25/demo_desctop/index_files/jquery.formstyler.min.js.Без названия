!function(b){"function"==typeof define&&define.amd?define(["jquery"],b):"object"==typeof exports?module.exports=b(require("jquery")):b(jQuery)}(function(b){function A(c,a){this.element=c;this.options=b.extend({},O,a);this.init()}function H(c){if(!b(c.target).parents().hasClass("jq-selectbox")&&"OPTION"!=c.target.nodeName&&b("div.jq-selectbox.opened").length){c=b("div.jq-selectbox.opened");var a=b("div.jq-selectbox__search input",c),f=b("div.jq-selectbox__dropdown",c);c.find("select").data("_"+h).options.onSelectClosed.call(c);
a.length&&a.val("").keyup();f.hide().find("li.sel").addClass("selected");c.removeClass("focused opened dropup dropdown")}}var h="styler",O={wrapper:"form",idSuffix:"-styler",filePlaceholder:"\u0424\u0430\u0439\u043b \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d",fileBrowse:"\u041e\u0431\u0437\u043e\u0440...",fileNumber:"\u0412\u044b\u0431\u0440\u0430\u043d\u043e \u0444\u0430\u0439\u043b\u043e\u0432: %s",selectPlaceholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435...",selectSearch:!1,selectSearchLimit:10,
selectSearchNotFound:"\u0421\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e",selectSearchPlaceholder:"\u041f\u043e\u0438\u0441\u043a...",selectVisibleOptions:0,singleSelectzIndex:"13",selectSmartPositioning:!0,onSelectOpened:function(){},onSelectClosed:function(){},onFormStyled:function(){}};A.prototype={init:function(){function c(){var b="",d="",c="",e="";void 0!==a.attr("id")&&""!==a.attr("id")&&(b=' id="'+a.attr("id")+f.idSuffix+'"');
void 0!==a.attr("title")&&""!==a.attr("title")&&(d=' title="'+a.attr("title")+'"');void 0!==a.attr("class")&&""!==a.attr("class")&&(c=" "+a.attr("class"));var l=a.data(),t;for(t in l)""!==l[t]&&"_styler"!==t&&(e+=" data-"+t+'="'+l[t]+'"');this.id=b+e;this.title=d;this.classes=c}var a=b(this.element),f=this.options,z=navigator.userAgent.match(/(iPad|iPhone|iPod)/i)&&!navigator.userAgent.match(/(Windows\sPhone)/i)?!0:!1,h=navigator.userAgent.match(/Android/i)&&!navigator.userAgent.match(/(Windows\sPhone)/i)?
!0:!1;if(a.is(":checkbox")){var A=function(){var f=new c,d=b("<div"+f.id+' class="jq-checkbox'+f.classes+'"'+f.title+'><div class="jq-checkbox__div"></div></div>');a.css({position:"absolute",zIndex:"-1",opacity:0,margin:0,padding:0}).after(d).prependTo(d);d.attr("unselectable","on").css({"-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","-o-user-select":"none","user-select":"none",display:"inline-block",position:"relative",overflow:"hidden"});a.is(":checked")&&d.addClass("checked");
a.is(":disabled")&&d.addClass("disabled");d.click(function(b){b.preventDefault();d.is(".disabled")||(a.is(":checked")?(a.prop("checked",!1),d.removeClass("checked")):(a.prop("checked",!0),d.addClass("checked")),a.focus().change())});a.closest("label").add('label[for="'+a.attr("id")+'"]').on("click.styler",function(a){b(a.target).is("a")||b(a.target).closest(d).length||(d.triggerHandler("click"),a.preventDefault())});a.on("change.styler",function(){a.is(":checked")?d.addClass("checked"):d.removeClass("checked")}).on("keydown.styler",
function(a){32==a.which&&d.click()}).on("focus.styler",function(){d.is(".disabled")||d.addClass("focused")}).on("blur.styler",function(){d.removeClass("focused")})};A();a.on("refresh",function(){a.closest("label").add('label[for="'+a.attr("id")+'"]').off(".styler");a.off(".styler").parent().before(a).remove();A()})}else if(a.is(":radio")){var C=function(){var y=new c,d=b("<div"+y.id+' class="jq-radio'+y.classes+'"'+y.title+'><div class="jq-radio__div"></div></div>');a.css({position:"absolute",zIndex:"-1",
opacity:0,margin:0,padding:0}).after(d).prependTo(d);d.attr("unselectable","on").css({"-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","-o-user-select":"none","user-select":"none",display:"inline-block",position:"relative"});a.is(":checked")&&d.addClass("checked");a.is(":disabled")&&d.addClass("disabled");d.click(function(b){b.preventDefault();d.is(".disabled")||(d.closest(f.wrapper).find('input[name="'+a.attr("name")+'"]').prop("checked",!1).parent().removeClass("checked"),
a.prop("checked",!0).parent().addClass("checked"),a.focus().change())});a.closest("label").add('label[for="'+a.attr("id")+'"]').on("click.styler",function(a){b(a.target).is("a")||b(a.target).closest(d).length||(d.triggerHandler("click"),a.preventDefault())});a.on("change.styler",function(){a.parent().addClass("checked")}).on("focus.styler",function(){d.is(".disabled")||d.addClass("focused")}).on("blur.styler",function(){d.removeClass("focused")})};C();a.on("refresh",function(){a.closest("label").add('label[for="'+
a.attr("id")+'"]').off(".styler");a.off(".styler").parent().before(a).remove();C()})}else if(a.is(":file")){a.css({position:"absolute",top:0,right:0,width:"100%",height:"100%",opacity:0,margin:0,padding:0});var D=function(){var y=new c,d=a.data("placeholder");void 0===d&&(d=f.filePlaceholder);var B=a.data("browse");void 0!==B&&""!==B||(B=f.fileBrowse);var e=b("<div"+y.id+' class="jq-file'+y.classes+'"'+y.title+' style="display: inline-block; position: relative; overflow: hidden"></div>'),l=b('<div class="jq-file__name">'+
d+"</div>").appendTo(e);b('<div class="jq-file__browse">'+B+"</div>").appendTo(e);a.after(e).appendTo(e);a.is(":disabled")&&e.addClass("disabled");a.on("change.styler",function(){var b=a.val();if(a.is("[multiple]")){var b="",c=a[0].files.length;0<c&&(b=a.data("number"),void 0===b&&(b=f.fileNumber),b=b.replace("%s",c))}l.text(b.replace(/.+[\\\/]/,""));""===b?(l.text(d),e.removeClass("changed")):e.addClass("changed")}).on("focus.styler",function(){e.addClass("focused")}).on("blur.styler",function(){e.removeClass("focused")}).on("click.styler",
function(){e.removeClass("focused")})};D();a.on("refresh",function(){a.off(".styler").parent().before(a).remove();D()})}else if(a.is('input[type="number"]')){var E=function(){var c=b('<div class="jq-number"><div class="jq-number__spin minus"></div><div class="jq-number__spin plus"></div></div>');a.after(c).prependTo(c).wrap('<div class="jq-number__field"></div>');a.is(":disabled")&&c.addClass("disabled");var d,f,e,l=null,t=null;void 0!==a.attr("min")&&(d=a.attr("min"));void 0!==a.attr("max")&&(f=
a.attr("max"));e=Number(void 0!==a.attr("step")&&b.isNumeric(a.attr("step"))?a.attr("step"):1);var L=function(n){var c,k=a.val();b.isNumeric(k)||(k=0,a.val("0"));n.is(".minus")?(c=parseInt(k,10)-e,0<e&&(c=Math.ceil(c/e)*e)):n.is(".plus")&&(c=parseInt(k,10)+e,0<e&&(c=Math.floor(c/e)*e));b.isNumeric(d)&&b.isNumeric(f)?c>=d&&f>=c&&a.val(c):b.isNumeric(d)&&!b.isNumeric(f)?c>=d&&a.val(c):!b.isNumeric(d)&&b.isNumeric(f)?f>=c&&a.val(c):a.val(c)};c.is(".disabled")||(c.on("mousedown","div.jq-number__spin",
function(){var a=b(this);L(a);l=setTimeout(function(){t=setInterval(function(){L(a)},40)},350)}).on("mouseup mouseout","div.jq-number__spin",function(){clearTimeout(l);clearInterval(t)}),a.on("focus.styler",function(){c.addClass("focused")}).on("blur.styler",function(){c.removeClass("focused")}))};E();a.on("refresh",function(){a.off(".styler").closest(".jq-number").before(a).remove();E()})}else if(a.is("select")){var N=function(){function y(a){a.off("mousewheel DOMMouseScroll").on("mousewheel DOMMouseScroll",
function(a){var c=null;"mousewheel"==a.type?c=-1*a.originalEvent.wheelDelta:"DOMMouseScroll"==a.type&&(c=40*a.originalEvent.detail);c&&(a.stopPropagation(),a.preventDefault(),b(this).scrollTop(c+b(this).scrollTop()))})}function d(){for(var a=0;a<l.length;a++){var b=l.eq(a),c="",d="",e=c="",u="",v="",w="",x="",g="";b.prop("selected")&&(d="selected sel");b.is(":disabled")&&(d="disabled");b.is(":selected:disabled")&&(d="selected sel disabled");void 0!==b.attr("id")&&""!==b.attr("id")&&(e=' id="'+b.attr("id")+
f.idSuffix+'"');void 0!==b.attr("title")&&""!==l.attr("title")&&(u=' title="'+b.attr("title")+'"');void 0!==b.attr("class")&&(w=" "+b.attr("class"),g=' data-jqfs-class="'+b.attr("class")+'"');var h=b.data(),q;for(q in h)""!==h[q]&&(v+=" data-"+q+'="'+h[q]+'"');""!==d+w&&(c=' class="'+d+w+'"');c="<li"+g+v+c+u+e+">"+b.html()+"</li>";b.parent().is("optgroup")&&(void 0!==b.parent().attr("class")&&(x=" "+b.parent().attr("class")),c="<li"+g+v+' class="'+d+w+" option"+x+'"'+u+e+">"+b.html()+"</li>",b.is(":first-child")&&
(c='<li class="optgroup'+x+'">'+b.parent().attr("label")+"</li>"+c));t+=c}}function A(){var e=new c,n="",I=a.data("placeholder"),k=a.data("search"),h=a.data("search-limit"),u=a.data("search-not-found"),v=a.data("search-placeholder"),w=a.data("z-index"),x=a.data("smart-positioning");void 0===I&&(I=f.selectPlaceholder);void 0!==k&&""!==k||(k=f.selectSearch);void 0!==h&&""!==h||(h=f.selectSearchLimit);void 0!==u&&""!==u||(u=f.selectSearchNotFound);void 0===v&&(v=f.selectSearchPlaceholder);void 0!==w&&
""!==w||(w=f.singleSelectzIndex);void 0!==x&&""!==x||(x=f.selectSmartPositioning);var g=b("<div"+e.id+' class="jq-selectbox jqselect'+e.classes+'" style="display: inline-block; position: relative; z-index:'+w+'"><div class="jq-selectbox__select"'+e.title+' style="position: relative"><div class="jq-selectbox__select-text"></div><div class="jq-selectbox__trigger"><div class="jq-selectbox__trigger-arrow"></div></div></div></div>');a.css({margin:0,padding:0}).after(g).prependTo(g);var M=b("div.jq-selectbox__select",
g),q=b("div.jq-selectbox__select-text",g),e=l.filter(":selected");d();k&&(n='<div class="jq-selectbox__search"><input type="search" autocomplete="off" placeholder="'+v+'"></div><div class="jq-selectbox__not-found">'+u+"</div>");var m=b('<div class="jq-selectbox__dropdown" style="position: absolute">'+n+'<ul class="list-reset" style="position: relative; list-style: none; overflow: auto; overflow-x: hidden">'+t+"</ul></div>");g.append(m);var r=b("ul",m),p=b("li",m),F=b("input",m),B=b("div.jq-selectbox__not-found",
m).hide();p.length<h&&F.parent().hide();""===a.val()?q.text(I).addClass("placeholder"):q.text(e.text());var G=0,C=0;(p.each(function(){var a=b(this);a.css({display:"inline-block","white-space":"nowrap"});a.innerWidth()>G&&(G=a.innerWidth(),C=a.width());a.css({display:""})}),q.is(".placeholder")&&q.width()>G)?q.width(q.width()):(n=g.clone().appendTo("body").width("auto"),k=n.outerWidth(),n.remove(),k==g.outerWidth()&&q.width(C));G>g.width()&&m.width(G);""===l.first().text()&&""!==a.data("placeholder")&&
p.first().hide();a.css({position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:0});var D=g.outerHeight(),J=F.outerHeight(),K=r.css("max-height"),n=p.filter(".selected");1>n.length&&p.first().addClass("selected sel");void 0===p.data("li-height")&&p.data("li-height",p.outerHeight()?p.outerHeight():30);var E=m.css("top");if("auto"==m.css("left")&&m.css({left:0}),"auto"==m.css("top")&&m.css({top:D}),m.hide(),n.length&&(l.first().text()!=e.text()&&g.addClass("changed"),g.data("jqfs-class",
n.data("jqfs-class")),g.addClass(n.data("jqfs-class"))),a.is(":disabled"))return g.addClass("disabled"),!1;M.click(function(){if(b("div.jq-selectbox").filter(".opened").length&&f.onSelectClosed.call(b("div.jq-selectbox").filter(".opened")),a.focus(),!z){var c=b(window),d=p.data("li-height"),e=g.offset().top,v=c.height()-D-(e-c.scrollTop()),n=a.data("visible-options");void 0!==n&&""!==n||(n=f.selectVisibleOptions);var k=5*d,h=d*n;0<n&&6>n&&(k=h);0===n&&(h="auto");var n=function(){m.height("auto").css({bottom:"auto",
top:E});var a=function(){r.css("max-height",Math.floor((v-20-J)/d)*d)};a();r.css("max-height",h);"none"!=K&&r.css("max-height",K);v<m.outerHeight()+20&&a()},q=function(){m.height("auto").css({top:"auto",bottom:E});var a=function(){r.css("max-height",Math.floor((e-c.scrollTop()-20-J)/d)*d)};a();r.css("max-height",h);"none"!=K&&r.css("max-height",K);e-c.scrollTop()-20<m.outerHeight()+20&&a()};!0===x||1===x?v>k+J+20?(n(),g.removeClass("dropup").addClass("dropdown")):(q(),g.removeClass("dropdown").addClass("dropup")):
(!1===x||0===x)&&v>k+J+20&&(n(),g.removeClass("dropup").addClass("dropdown"));g.offset().left+m.outerWidth()>c.width()&&m.css({left:"auto",right:0});b("div.jqselect").css({zIndex:w-1}).removeClass("opened");g.css({zIndex:w});m.is(":hidden")?(b("div.jq-selectbox__dropdown:visible").hide(),m.show(),g.addClass("opened focused"),f.onSelectOpened.call(g)):(m.hide(),g.removeClass("opened dropup dropdown"),b("div.jq-selectbox").filter(".opened").length&&f.onSelectClosed.call(g));F.length&&(F.val("").keyup(),
B.hide(),F.keyup(function(){var c=b(this).val();p.each(function(){b(this).html().match(new RegExp(".*?"+c+".*?","i"))?b(this).show():b(this).hide()});""===l.first().text()&&""!==a.data("placeholder")&&p.first().hide();1>p.filter(":visible").length?B.show():B.hide()}));p.filter(".selected").length&&(""===a.val()?r.scrollTop(0):(0!==r.innerHeight()/d%2&&(d/=2),r.scrollTop(r.scrollTop()+p.filter(".selected").position().top-r.innerHeight()/2+d)));y(r)}});p.hover(function(){b(this).siblings().removeClass("selected")});
p.filter(".selected").text();p.filter(":not(.disabled):not(.optgroup)").click(function(){a.focus();var c=b(this),d=c.text();if(!c.is(".selected")){var e=c.index(),e=e-c.prevAll(".optgroup").length;c.addClass("selected sel").siblings().removeClass("selected sel");l.prop("selected",!1).eq(e).prop("selected",!0);q.text(d);g.data("jqfs-class")&&g.removeClass(g.data("jqfs-class"));g.data("jqfs-class",c.data("jqfs-class"));g.addClass(c.data("jqfs-class"));a.change()}m.hide();g.removeClass("opened dropup dropdown");
f.onSelectClosed.call(g)});m.mouseout(function(){b("li.sel",m).addClass("selected")});a.on("change.styler",function(){q.text(l.filter(":selected").text()).removeClass("placeholder");p.removeClass("selected sel").not(".optgroup").eq(a[0].selectedIndex).addClass("selected sel");l.first().text()!=p.filter(".selected").text()?g.addClass("changed"):g.removeClass("changed")}).on("focus.styler",function(){g.addClass("focused");b("div.jqselect").not(".focused").removeClass("opened dropup dropdown").find("div.jq-selectbox__dropdown").hide()}).on("blur.styler",
function(){g.removeClass("focused")}).on("keydown.styler keyup.styler",function(b){var c=p.data("li-height");""===a.val()?q.text(I).addClass("placeholder"):q.text(l.filter(":selected").text());p.removeClass("selected sel").not(".optgroup").eq(a[0].selectedIndex).addClass("selected sel");38!=b.which&&37!=b.which&&33!=b.which&&36!=b.which||r.scrollTop(""===a.val()?0:r.scrollTop()+p.filter(".selected").position().top);40!=b.which&&39!=b.which&&34!=b.which&&35!=b.which||r.scrollTop(r.scrollTop()+p.filter(".selected").position().top-
r.innerHeight()+c);13==b.which&&(b.preventDefault(),m.hide(),g.removeClass("opened dropup dropdown"),f.onSelectClosed.call(g))}).on("keydown.styler",function(a){32==a.which&&(a.preventDefault(),M.click())});H.registered||(b(document).on("click",H),H.registered=!0)}function e(){var e=new c,f=b("<div"+e.id+' class="jq-select-multiple jqselect'+e.classes+'"'+e.title+' style="display: inline-block; position: relative"></div>');a.css({margin:0,padding:0}).after(f);d();f.append("<ul>"+t+"</ul>");var h=
b("ul",f).css({position:"relative","overflow-x":"hidden","-webkit-overflow-scrolling":"touch"}),k=b("li",f).attr("unselectable","on"),e=a.attr("size"),z=h.outerHeight(),u=k.outerHeight();h.css(void 0!==e&&0<e?{height:u*e}:{height:4*u});z>f.height()&&(h.css("overflowY","scroll"),y(h),k.filter(".selected").length&&h.scrollTop(h.scrollTop()+k.filter(".selected").position().top));a.prependTo(f).css({position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:0});a.is(":disabled")?(f.addClass("disabled"),
l.each(function(){b(this).is(":selected")&&k.eq(b(this).index()).addClass("selected")})):(k.filter(":not(.disabled):not(.optgroup)").click(function(c){a.focus();var d=b(this);if(c.ctrlKey||c.metaKey||d.addClass("selected"),c.shiftKey||d.addClass("first"),c.ctrlKey||c.metaKey||c.shiftKey||d.siblings().removeClass("selected first"),(c.ctrlKey||c.metaKey)&&(d.is(".selected")?d.removeClass("selected first"):d.addClass("selected first"),d.siblings().removeClass("first")),c.shiftKey){var e=!1,f=!1;d.siblings().removeClass("selected").siblings(".first").addClass("selected");
d.prevAll().each(function(){b(this).is(".first")&&(e=!0)});d.nextAll().each(function(){b(this).is(".first")&&(f=!0)});e&&d.prevAll().each(function(){return b(this).is(".selected")?!1:void b(this).not(".disabled, .optgroup").addClass("selected")});f&&d.nextAll().each(function(){return b(this).is(".selected")?!1:void b(this).not(".disabled, .optgroup").addClass("selected")});1==k.filter(".selected").length&&d.addClass("first")}l.prop("selected",!1);k.filter(".selected").each(function(){var a=b(this),
c=a.index();a.is(".option")&&(c-=a.prevAll(".optgroup").length);l.eq(c).prop("selected",!0)});a.change()}),l.each(function(a){b(this).data("optionIndex",a)}),a.on("change.styler",function(){k.removeClass("selected");var a=[];l.filter(":selected").each(function(){a.push(b(this).data("optionIndex"))});k.not(".optgroup").filter(function(c){return-1<b.inArray(c,a)}).addClass("selected")}).on("focus.styler",function(){f.addClass("focused")}).on("blur.styler",function(){f.removeClass("focused")}),z>f.height()&&
a.on("keydown.styler",function(a){38!=a.which&&37!=a.which&&33!=a.which||h.scrollTop(h.scrollTop()+k.filter(".selected").position().top-u);40!=a.which&&39!=a.which&&34!=a.which||h.scrollTop(h.scrollTop()+k.filter(".selected:last").position().top-h.innerHeight()+2*u)}))}var l=b("option",a),t="";a.is("[multiple]")?h||z||e():A()};N();a.on("refresh",function(){a.off(".styler").parent().before(a).remove();N()})}else a.is(":reset")&&a.on("click",function(){setTimeout(function(){a.closest(f.wrapper).find("input, select").trigger("refresh")},
1)})},destroy:function(){var c=b(this.element);c.is(":checkbox")||c.is(":radio")?(c.removeData("_"+h).off(".styler refresh").removeAttr("style").parent().before(c).remove(),c.closest("label").add('label[for="'+c.attr("id")+'"]').off(".styler")):c.is('input[type="number"]')?c.removeData("_"+h).off(".styler refresh").closest(".jq-number").before(c).remove():(c.is(":file")||c.is("select"))&&c.removeData("_"+h).off(".styler refresh").removeAttr("style").parent().before(c).remove()}};b.fn[h]=function(c){var a=
arguments;if(void 0===c||"object"==typeof c)return this.each(function(){b.data(this,"_"+h)||b.data(this,"_"+h,new A(this,c))}).promise().done(function(){var a=b(this[0]).data("_"+h);a&&a.options.onFormStyled.call()}),this;if("string"==typeof c&&"_"!==c[0]&&"init"!==c){var f;return this.each(function(){var z=b.data(this,"_"+h);z instanceof A&&"function"==typeof z[c]&&(f=z[c].apply(z,Array.prototype.slice.call(a,1)))}),void 0!==f?f:this}};H.registered=!1});